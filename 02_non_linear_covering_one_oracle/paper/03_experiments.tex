%!TEX root = ./main.tex

\section{Experiments}

\paragraph{Setting.}
To evaluate the empirical performance of our proposed algorithm, we conducted experiments on routing problems
that are motivated by congestion management.
In this problem we are given a directed graph $G(A,V)$ and a set of requests $R = \{(s_{i}, t_{i}) : s_{i}, t_{i} \in V\}$ that represents demands to connect $s_{i}$ to $t_{i}$. We assume that for each request there exists a directed path between $s_{i}$ to $t_{i}$.
Each arc $(u, v) \in A$ is associated with a cost function $f_{(u,v)}: \mathbb{R}^{+} \rightarrow \mathbb{R}^{+}$ that depends on the number of requests using the arc.
Requests arrive online and the goal is to design a routing that minimizes the total cost.


\paragraph{Input.}
There are three type of inputs in our experiments. The first one includes randomly generated graphs following the Erd\H{o}s-RÃ©nyi model $G(n, p)$, where $n$ is the number of vertices and $p$ is the probability that an arc gets created. The source and target vertices of the requests are also generated uniformly at random. The second category creates a cycle with the given number of vertices and creates an arc between each neighboring vertex in both direction, ensuring that each vertex is connected. Afterwards, we randomly generate edges between non-adjacent vertices and the requests.
The third input type collects specific examples designed to trap algorithms which rely on greedy heuristics. These instances do not include randomness, they were designed by hand.


\paragraph{Predictions.}
The predictions come from rounding the optimal offline fractional solution. If a request is served by several paths in the fractional solution, the oracle picks one of the paths uniformly at random using the amounts passing through each of them as weights. Otherwise, the oracle uses the unique best path of the optimal solution. Due to the randomized rounding, on most instances the oracles propose a worse solution than the optimal greedy integral solution, which picks the cheapest path at each time step. To improve the quality of the oracles, we create several unique oracles and then take the ones with the best, the worst and the middle performance during our analysis.


\paragraph{Implementation.}
The routing problem's covering formulation enumerates all possible cuts in the graph. Upon each arriving request $r = (s,t)$, a new set of constraints are released $\sum_{e \in \delta(S)} x_{e}^{r} \ge 1$, where $\delta(S)$ is the cut on $S \subset V$ such that $s \in S$ and $t \notin S$. This formulation generates an exponential number of constraints with respect to the size of the graph. However, these constraints can be simplified in the implementation of Algorithm~\ref{algo:covering}, since the algorithm is not constrained by standard linear program solving techniques. Algorithm~\ref{algo:covering} increases the amount of traffic on each arc following the step described on line \ref{algo-covering:x}. The request is satisfied when there exists a path among the arcs in the set $A^{*}$ (arcs with value $1$). Therefore, we can replace the constraint satisfaction with a simple path finding in the implementation. If there are several possible paths with the arcs in $A^{*}$, our algorithm chooses the minimum cost path, so the implementation includes a rounding step, providing an integral solution.


\paragraph{Instances.} Randomly generated instances yield similar results. On large instances with many vertices, arcs, and request, the greedy solution and the oracles are far from the optimal offline fractional solution. However, on small instances, the greedy heuristic works well, and it is more likely to obtain good oracles. Instance $1$ represents a large randomly generated instance, while Instance $2$ a small one. The second category of inputs guarantee that the graph is connected and Instance $3$ represents on of these inputs. Finally, we show an example, where the greedy heuristic makes really sub-optimal decisions on Instance $4$. These instances are complementary and allow us to examine how our algorithm behaves when the oracles' predictions are worse or better than the greedy heuristic.

\textit{Instance $1$} has $20$ vertices, $184$ arcs, and $20$ requests. Each arc has a cost function of the form $f(x) = a x^b$, where $1.0 \le a \le 10.0$ and $1.0 \le b \le 4.0$. We generated $20$ oracles from the optimal offline fractional solution and kept $3$ of these oracles: the best, the worst and the middle one on the scale of their obtained objective values. The result of this execution is visible on \cref{fig:random}.

\textit{Instance $2$} has $10$ vertices, $32$ arcs, and $5$ requests. Each arc has a cost function of the form $f(x) = a x^b$, where $1.0 \le a \le 10.0$ and $1.0 \le b \le 4.0$. We generated $10$ oracles from the optimal offline fractional solution and kept $3$ of these oracles: the best, the worst and the middle one on the scale of their obtained objective values. The result of this execution is visible on \cref{fig:small-random}.

\textit{Instance $4$} has $50$ vertices, $120$ arcs, and $20$ requests. Each arc has a cost function of the form $f(x) = a x^b$, where $1.0 \le a \le 5.0$ and $1.0 \le b \le 5.0$. We generated $20$ oracles from the optimal offline fractional solution and kept $3$ of these oracles: the best, the worst and the middle one on the scale of their obtained objective values. The result of this execution is visible on \cref{fig:connected}.

\textit{Instance $4$} has $8$ vertices, $16$ arcs, and $7$ requests. This instance is specifically designed to trap the greedy heuristic. The structure of Instance $4$ is visible on \cref{fig:cex}, along with its greedy and optimal solutions.



\begin{center}
    \includegraphics[width=\linewidth]{Img/random_2.pdf}
    \captionof{figure}{Performance analysis of Instance $1$}
    \label{fig:random}
\end{center}


\begin{center}
    \includegraphics[width=\linewidth]{Img/random.pdf}
    \captionof{figure}{Performance analysis of Instance $2$}
    \label{fig:small-random}
\end{center}

\begin{center}
    \includegraphics[width=\linewidth]{Img/connected.pdf}
    \captionof{figure}{Performance analysis of Instance $3$}
    \label{fig:connected}
\end{center}

{
    \begin{minipage}{0.3\textwidth}
        \includegraphics[width=\linewidth]{Img/cex_init.pdf}
    \end{minipage}
    \begin{minipage}{0.3\textwidth}
        \includegraphics[width=\linewidth]{Img/cex_greedy.pdf}
    \end{minipage}
    \begin{minipage}{0.3\textwidth}
        \includegraphics[width=\linewidth]{Img/cex_opt.pdf}
    \end{minipage}
    \captionof{figure}{Instance $4$, its greedy solution, and its optimal solution}
    \label{fig:cex}
}

\paragraph{Observation.}
